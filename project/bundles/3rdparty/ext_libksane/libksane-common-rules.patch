diff --git a/CMakeLists.txt b/CMakeLists.txt
index 1979aec..a8f997f 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -50,13 +50,13 @@ find_package(KF5I18n ${KF5_VERSION} REQUIRED)
 
 if (NOT WIN32)
     find_package(KF5WidgetsAddons ${KF5_VERSION} REQUIRED)
-    find_package(KF5TextWidgets ${KF5_VERSION} REQUIRED)
+#    find_package(KF5TextWidgets ${KF5_VERSION} REQUIRED)
 
     # Optional KF5 frameworks
-    find_package(KF5Wallet ${KF5_VERSION})
-    set_package_properties(KF5Wallet PROPERTIES DESCRIPTION "Safe desktop-wide storage for passwords" TYPE OPTIONAL
-        PURPOSE "Required to have permanent storage of passwords for scanners"
-    )
+#    find_package(KF5Wallet ${KF5_VERSION})
+#    set_package_properties(KF5Wallet PROPERTIES DESCRIPTION "Safe desktop-wide storage for passwords" TYPE OPTIONAL
+#        PURPOSE "Required to have permanent storage of passwords for scanners"
+#    )
 
     # Check if sane API is available.
     find_package(Sane REQUIRED)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 9daa4c5..cadac0b 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -71,7 +71,7 @@ target_link_libraries(KF5Sane
 
         KF5::I18n
         KF5::WidgetsAddons
-        KF5::TextWidgets
+#        KF5::TextWidgets
 )
 
 set_target_properties(KF5Sane
diff --git a/src/widgets/labeledslider.cpp b/src/widgets/labeledslider.cpp
index e907b62..7cb0610 100644
--- a/src/widgets/labeledslider.cpp
+++ b/src/widgets/labeledslider.cpp
@@ -13,10 +13,11 @@
 
 #include <QLabel>
 #include <QSlider>
+#include <QSpinBox>
 
 // KDE includes
 
-#include <KPluralHandlingSpinBox>
+#include <klocalizedstring.h>
 
 namespace KSaneIface
 {
@@ -92,7 +93,7 @@ void LabeledSlider::initSlider(int minValue, int maxValue, int stepValue)
     m_slider->setMaximum(maxValue);
     m_slider->setSingleStep(m_step);
 
-    m_spinb = new KPluralHandlingSpinBox(this);
+    m_spinb = new QSpinBox(this);
     m_spinb->setMinimum(minValue);
     m_spinb->setMaximum(maxValue);
     m_slider->setSingleStep(m_step);
@@ -116,7 +117,7 @@ void LabeledSlider::initSlider(int minValue, int maxValue, int stepValue)
 
 void LabeledSlider::setSuffix(const KLocalizedString &text)
 {
-    m_spinb->setSuffix(text);
+    m_spinb->setSuffix(text.toString());
 }
 
 void LabeledSlider::setValue(const QVariant &val)
diff --git a/src/widgets/labeledslider.h b/src/widgets/labeledslider.h
index 7a6c434..6aa8e25 100644
--- a/src/widgets/labeledslider.h
+++ b/src/widgets/labeledslider.h
@@ -12,7 +12,8 @@
 
 #include "ksaneoptionwidget.h"
 
-class QSlider;
+#include <QSlider>
+#include <QSpinBox>
 
 /**
   *@author Kåre Särs
@@ -80,7 +81,7 @@ Q_SIGNALS:
 private:
     void initSlider(int minValue, int maxValue, int stepValue);
     QSlider   *m_slider;
-    KPluralHandlingSpinBox  *m_spinb;
+    QSpinBox  *m_spinb;
     int        m_step;
 };
 
